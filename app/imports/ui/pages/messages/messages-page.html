<template name="Message_Page">
  {{#if Template.subscriptionsReady}}
    <div class="ui container">
      <select name="receiveOrSent" id="receiveOrSentButtons">
        <option value="receive">Received</option>
        <option value="sent">Sent</option>
      </select>
      <table class="ui striped padded red table">
        <thead>
        <tr>
          <th></th>
          <th>To</th>
          <th>From</th>
          <th>Date</th>
          <th>Subject</th>
          <th>Read</th>
        </tr>
        </thead>
        <tbody>
        {{#if showReceivedMessages}}
          {{#each message in receivedMessageList}}
            <tr>
              <td class="center aligned">
                {{#if message.notRead}}
                  <span style="color: #ff0000">New</span>
                {{/if}}
              </td>
              <td>{{message.destination}}</td>
              <td>{{message.username}}</td>
              <td>{{message.date}}</td>
              <td>{{message.subject}}</td>
              <td>
                <a href="{{pathFor 'Read_Message_Page' username=routeUserName messageID=message._id}}">
                  <i class="red book icon"></i>
                </a>
              </td>
            </tr>
          {{/each}}
        {{else}}
          {{#each message in sentMessageList}}
            <tr>
              <td class="center aligned">
                {{#if message.isDraft}}
                  <span style="color: #ca3b33">Draft </span><i class="large red warning icon"></i>
                {{/if}}
              </td>
              <td>{{message.destination}}</td>
              <td>{{message.username}}</td>
              <td>{{message.date}}</td>
              <td>{{message.subject}}</td>
              <td>
                <a href="{{pathFor 'Read_Message_Page' username=routeUserName messageID=message._id}}">
                  <i class="red book icon"></i>
                </a>
              </td>
            </tr>
          {{/each}}
        {{/if}}
        </tbody>
      </table>
    </div>
  {{/if}}
</template>
